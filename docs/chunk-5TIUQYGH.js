import{a as Q,b as X,c as Y,d as Z,e as ee,f as te,g as ie,h as ne,i as oe,j as re,k as ae}from"./chunk-ZXIYNZBJ.js";import{d as W,h as q,i as H,j as J,k as E,l as M}from"./chunk-UEPR7ERN.js";import{Aa as S,Ga as _,Ia as c,Ja as G,La as U,Ma as V,N as v,Pa as l,Qa as a,Ra as w,S as N,Sa as B,Ta as K,Ua as C,V as b,Va as x,Wa as f,Xa as p,ba as d,bb as y,ca as u,cb as m,eb as P,fb as $,g as R,ja as j,ka as k,kb as I,lb as D,mb as F,nb as T,ob as A,ta as s,ua as g,za as z}from"./chunk-BGMWRBYG.js";var de=(i,n)=>({data:i,title:n});function ue(i,n){i&1&&C(0)}var le=(()=>{let n=class n{constructor(e){this.elementRef=e,this.modalSizeClass={sm:"w-1/4",md:"w-1/2",lg:"w-4/5"},this.isInnerBackdropActive=!1,this.size="md",this.title="Modal title",this.data=null,this.closeEvent=new k,this.submitEvent=new k}close(){this.elementRef.nativeElement.remove(),this.closeEvent.emit()}closeBackdrop(){this.isInnerBackdropActive=!1}ngOnDestroy(){}};n.\u0275fac=function(t){return new(t||n)(g(j))},n.\u0275cmp=b({type:n,selectors:[["app-modal"]],inputs:{contentTemplate:"contentTemplate",size:"size",title:"title",data:"data"},outputs:{closeEvent:"closeEvent",submitEvent:"submitEvent"},standalone:!0,features:[I],decls:3,vars:8,consts:[[4,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"modal-backdrop","w-full","h-full","bg-black","bg-opacity-40","fixed","z-10","inset-x-0","inset-y-0","flex","items-center","justify-center",3,"click"]],template:function(t,r){t&1&&(l(0,"div"),_(1,ue,1,0,"ng-container",0),a(),l(2,"div",1),f("click",function(){return r.close()}),a()),t&2&&(U("modal ",r.modalSizeClass&&r.modalSizeClass[r.size]?r.modalSizeClass[r.size]:"sm"," absolute z-20 left-1/2 top-1/2 h-auto bg-white rounded-[5px] py-2 px-3"),s(),c("ngTemplateOutlet",r.contentTemplate)("ngTemplateOutletContext",T(5,de,r.data,r.title)))},dependencies:[M,E],styles:[".modal[_ngcontent-%COMP%]{transform:translate(-50%,-50%)}"]});let i=n;return i})();var se=(()=>{let n=class n{constructor(e,t){this.vcr=e,this.document=t,this.modalComponent=null}open(e,t){return this.modalComponent=this.vcr.createComponent(le),this.modalComponent.instance.contentTemplate=e,this.modalComponent.instance.size=t?.size,this.modalComponent.instance.data=t?.data,this.modalComponent.instance.title=t?.title,this.modalComponent.instance.closeEvent.subscribe(()=>this.closeModal()),this.modalComponent.hostView.detectChanges(),this.document.body.appendChild(this.modalComponent.location.nativeElement),this.modalNotifier=new R,this.modalNotifier?.asObservable()}closeModal(){this.modalNotifier?.complete(),this.modalComponent.destroy()}submitModal(e){this.modalNotifier?.next({event:"confirm",data:e}),this.closeModal()}};n.\u0275fac=function(t){return new(t||n)(N(z),N(W))},n.\u0275prov=v({token:n,factory:n.\u0275fac,providedIn:"root"});let i=n;return i})();var pe=(()=>{let n=class n{constructor(){this.allSuppliersData=[{id:1,name:"Activision"},{id:2,name:"Rockstar Games"},{id:3,name:"GTA San Diego"},{id:4,name:"RDR Dakota"},{id:5,name:"GTA California"}],this.statusDataList=[{id:1,name:"Rejected"},{id:2,name:"Approved"},{id:3,name:"Pending"}]}getSuppliers(){return this.allSuppliersData}};n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=v({token:n,factory:n.\u0275fac,providedIn:"root"});let i=n;return i})();var ce=()=>["name"],he=()=>["partNumber","description"],ge=i=>({$implicit:i,level:0}),Ce=i=>({"margin-left.px":i}),xe=(i,n)=>({$implicit:i,level:n});function ve(i,n){i&1&&C(0)}function be(i,n){if(i&1){let o=x();l(0,"div",10)(1,"input",23),f("click",function(){d(o);let t=p(2);return u(t.uncheckRelatedParent())}),a(),l(2,"label",24),m(3,"Related to"),a(),l(4,"app-dropdown-search",25),f("selectedItem",function(t){d(o);let r=p(2);return u(r.selectParentProduct(t))})("searchedItem",function(t){d(o);let r=p(2);return u(r.searchParent(t))})("changeEvent",function(){d(o);let t=p(2);return u(t.uncheckRelatedParent())}),a()()}if(i&2){let o=p(2);s(),c("checked",o.isParentChosen)("disabled",!o.isParentChosen),s(3),c("searchDataList",o.productSearchList)("listKeys",D(4,he))}}function Se(i,n){i&1&&C(0)}function we(i,n){if(i&1&&(l(0,"ul",20),_(1,Se,1,0,"ng-container",26),a()),i&2){let o=p(2),e=y(14);s(),c("ngTemplateOutlet",e)("ngTemplateOutletContext",F(2,ge,o.data))}}function ye(i,n){if(i&1){let o=x();l(0,"form",9),_(1,be,5,5,"div",10),l(2,"div",11)(3,"div",12)(4,"label",13),m(5,"Part Number"),a(),w(6,"input",14),a(),l(7,"app-dropdown-search",15),f("selectedItem",function(t){d(o);let r=p();return u(r.selectSupplier(t))})("searchedItem",function(t){d(o);let r=p();return u(r.searchSupplier(t))}),a()(),l(8,"div",11)(9,"app-dropdown",16),f("selectedItem",function(t){d(o);let r=p();return u(r.selectStatus(t))}),a(),l(10,"div",12)(11,"label",17),m(12,"Description"),a(),w(13,"input",18),a()(),l(14,"div",11)(15,"div",12)(16,"label",19),m(17,"Components"),a(),_(18,we,2,4,"ul",20),a(),l(19,"div",12)(20,"label",21),m(21,"Plant"),a(),w(22,"input",22),a()(),l(23,"div")(24,"h2"),m(25,"Regulatory compliance - \u0441\u043F\u0438\u0441\u043E\u043A \u0440\u0435\u0433\u0443\u043B\u0438\u0440\u0443\u044E\u0449\u0438\u0445 \u0430\u043A\u0442\u043E\u0432"),a()()()}if(i&2){let o=p();c("formGroup",o.productForm),s(),V(o.showParentChoseInput()?1:-1),s(6),c("label","Supplier")("searchDataList",o.availableSuppliers)("listKeys",D(10,ce)),s(2),c("label","Status")("default",o.statusDataList[2])("dataList",o.statusDataList)("listKeys",D(11,ce)),s(9),V(o.data?18:-1)}}function Pe(i,n){i&1&&C(0)}function Ie(i,n){if(i&1&&(B(0),_(1,Pe,1,0,"ng-container",26),K()),i&2){let o=n.$implicit,e=p(2).level;p();let t=y(14);s(),c("ngTemplateOutlet",t)("ngTemplateOutletContext",T(2,xe,o,e+1))}}function De(i,n){if(i&1&&(l(0,"ul"),_(1,Ie,2,5,"ng-container",30),a()),i&2){let o=p().$implicit;s(),c("ngForOf",o.components)}}function Te(i,n){if(i&1){let o=x();l(0,"li",27),f("click",function(t){let r=d(o).$implicit,h=p();return u(h.changeModalComponent(r,t))}),l(1,"div",28)(2,"span"),m(3),a(),l(4,"strong"),m(5),a(),m(6),a(),_(7,De,2,1,"ul",29),a()}if(i&2){let o=n.$implicit,e=n.level,t=p();c("ngStyle",F(8,Ce,e*10)),s(),G("selected",t.currentID()===o.id),s(2),P("level: ",e," "),s(2),P(" ",o.partNumber,""),s(),$(" - ",o.description," - ",o.supplier," "),s(),c("ngIf",o.components&&o.components.length)}}var We=(()=>{let n=class n{constructor(e,t,r){this.fb=e,this.modal=t,this.mockDataService=r,this.data=null,this.showParentChoseInput=S(null),this.currentID=S(null),this.parentSearch="",this.isParentListAvailable=!1,this.isParentChosen=!1,this.supplierSearch="",this.isSupplierAvailable=!1,this.currentSupplier=S(null),this.productForm=this.fb.group({parentID:[""],partNumber:[""],description:[""],plant:[""]}),this.productSearchList=[],this.allSuppliersData=this.mockDataService.allSuppliersData,this.statusDataList=this.mockDataService.statusDataList,this.availableSuppliers=[],this.allProduct=[{parentID:null,id:1,supplier:"Rockstar Games",partNumber:"123SU152",plant:"PLANT1",components:[{parentID:1,id:11,supplier:"GTA San Diego",partNumber:"123SU15253",plant:"PLANT21",components:[{parentID:11,id:111,supplier:"GTA California",partNumber:"123SU1g5",components:[],description:"gta California 2018",plant:"PLAN33"}],description:"gta V 2014 desc!"},{parentID:1,id:12,supplier:"RDR Dakota",partNumber:"123SU15212",components:[],description:"rdr desc main 2",plant:"PL12"}],description:"lorem text"},{parentID:null,id:2,supplier:"Activision",partNumber:"W1889000001",components:[],description:"decent description text",plant:"plant123"},{parentID:1,id:11,supplier:"GTA San Diego",partNumber:"123SU15253",components:[],description:"gta V 2014 desc!",plant:"plant413"},{parentID:11,id:111,supplier:"GTA California",partNumber:"123SU1g5",components:[],description:"gta California 2018",plant:"plant5413"},{parentID:1,id:12,supplier:"RDR Dakota",partNumber:"123SU15212",components:[],description:"rdr desc main 2",plant:"plant654"}]}close(){this.modal.closeModal()}uncheckRelatedParent(){this.isParentChosen&&(this.isParentChosen=!1)}submitModal(){this.modal.submitModal({oldData:this.data,newData:{currentSupplier:this.currentSupplier()}})}searchParent(e=""){e&&(this.productSearchList=this.allProduct.filter(t=>t.partNumber.includes(e.toString())||t.id==e).filter(t=>t.parentID),this.isParentListAvailable=!0)}searchSupplier(e){this.availableSuppliers=this.allSuppliersData.filter(t=>t.name.includes(e)||t.name.toLowerCase().includes(e.toLowerCase())),this.isSupplierAvailable=!0}selectParentProduct(e){this.isParentListAvailable=!1,this.parentSearch="",this.isParentChosen=e}selectSupplier(e){this.currentSupplier.set(e),this.isSupplierAvailable=!1}selectStatus(e){console.log("selectStatus",e)}focusSupplierInput(){this.availableSuppliers=[...this.allSuppliersData],this.isSupplierAvailable=!0}changeModalComponent(e,t){t.stopPropagation(),this.rerenderAllData(e)}rerenderAllData(e){this.isParentListAvailable=!1,this.parentSearch="",this.initForm(e),this.data=e}clearCurrentSupplier(){this.currentSupplier.set(null)}initForm(e){this.allSuppliersData.forEach(t=>{t.name===e.supplier&&this.currentSupplier.set(t)}),this.currentID.set(e.id),this.showParentChoseInput.set(e.parentID),e&&this.productForm.setValue({parentID:e.parentID,partNumber:e.partNumber,description:e.description,plant:e.plant})}ngOnInit(){if(!this.data){this.showParentChoseInput.set(!0);return}this.allProduct=this.allProduct.filter(e=>this.data.id!==e.id),this.initForm(this.data),console.log("data",this.data)}};n.\u0275fac=function(t){return new(t||n)(g(ie),g(se),g(pe))},n.\u0275cmp=b({type:n,selectors:[["app-product-modal"]],inputs:{data:"data"},standalone:!0,features:[I],decls:15,vars:2,consts:[["modalBody",""],["recursiveTree",""],[1,"modal-header","flex","justify-between","mb-3","text-lg"],[1,"modal-close","cursor-pointer",3,"click"],[1,"modal-content","mb-5"],[4,"ngTemplateOutlet"],[1,"modal-footer","flex","justify-end","gap-1"],[1,"submit-button","px-4","py-2","bg-red-700","text-white","font-semibold","rounded-lg","shadow-md","hover:bg-red-800","focus:outline-none","focus:ring-2","focus:ring-red-500","focus:ring-opacity-75",3,"click"],[1,"submit-button","px-4","py-2","bg-indigo-600","text-white","font-semibold","rounded-lg","shadow-md","hover:bg-indigo-700","focus:outline-none","focus:ring-2","focus:ring-indigo-500","focus:ring-opacity-75",3,"click"],[3,"formGroup"],[1,"flex","items-center","gap-1","mb-5"],[1,"flex","w-full","gap-10","mb-5"],[1,"flex","flex-col","w-2/4"],["for","partNumber",1,"text-sm","font-medium","text-gray-900"],["id","partNumber","name","partNumber","type","text","formControlName","partNumber",1,"w-full","h-[2rem]","border","px-2","py-1"],[1,"flex","flex-col","w-2/4",3,"selectedItem","searchedItem","label","searchDataList","listKeys"],[1,"flex","flex-col","w-2/4",3,"selectedItem","label","default","dataList","listKeys"],["for","description",1,"text-sm","font-medium","text-gray-900"],["id","description","name","description","type","text","formControlName","description",1,"w-full","h-[2rem]","border","px-2","py-1"],[1,"text-sm","font-medium","text-gray-900"],[1,"tree"],["for","plant",1,"text-sm","font-medium","text-gray-900"],["id","plant","name","plant","type","text","formControlName","plant",1,"w-full","h-[2rem]","border","px-2","py-1"],["id","relatedParent","type","checkbox","name","relatedParent",1,"w-4","h-4","text-blue-600","bg-gray-100","border-gray-300","rounded",3,"click","checked","disabled"],["for","relatedParent",1,"py-4","text-sm","font-medium","text-gray-900"],[1,"w-2/5",3,"selectedItem","searchedItem","changeEvent","searchDataList","listKeys"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"mb-2",3,"click","ngStyle"],[1,"border","px-2","py-1","bg-sky-50","cursor-pointer","hover:border-blue-700"],[4,"ngIf"],[4,"ngFor","ngForOf"]],template:function(t,r){if(t&1){let h=x();l(0,"div",2),m(1),l(2,"span",3),f("click",function(){return d(h),u(r.close())}),m(3,"\u2715"),a()(),l(4,"div",4),_(5,ve,1,0,"ng-container",5),a(),l(6,"div",6)(7,"button",7),f("click",function(){return d(h),u(r.close())}),m(8,"Close"),a(),l(9,"button",8),f("click",function(){return d(h),u(r.submitModal())}),m(10,"Submit"),a()(),_(11,ye,26,12,"ng-template",null,0,A)(13,Te,8,10,"ng-template",null,1,A)}if(t&2){let h=y(12);s(),P(" ",r.data?r.data.partNumber:"New Product"," "),s(4),c("ngTemplateOutlet",h)}},dependencies:[oe,Z,Q,X,Y,ee,te,ne,M,q,H,E,J,re,ae],styles:[".tree[_ngcontent-%COMP%]{list-style-type:none;padding-left:0}.tree[_ngcontent-%COMP%]   .selected[_ngcontent-%COMP%]{background-color:#bae6fd}"]});let i=n;return i})();export{se as a,pe as b,We as c};
